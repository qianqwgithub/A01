$(function(){CaseNodeKj();casesNav();});function casesNav(){var casesNav=$(".CaseMsgWrap .CaseImg .bg");if($(".v_li.activeThumb",casesNav).length){close()}else{casesNav.show()}
casesNav.hover(function(){open()},function(){close()});function open(){casesNav.animate({bottom:"0"},200)};function close(){casesNav.animate({bottom:"-119px"},200)};};function CaseNodeKj(){var wrap=$(".CaseMsgWrap"),node=$(".CaseNodeKj",wrap),nav=$(".CaseNodeKjNav",wrap),ul=$("ul",nav),win=$(window);if(!nav.length)return false;var nav_bottom=wrap.outerHeight()-node.position().top-node.outerHeight();nav.show().css("bottom",nav_bottom);function scrollToElement(y){$('html,body').animate({scrollTop:y},800);}
$('[scroll-href]',nav).click(function(){var href=$(this).attr('scroll-href');if(href=="0"){var y=0;}else{if($(href).length){var y=$(href).offset().top-100;}else{return false;}}
scrollToElement(y);return false;});var offset=nav.offset().top;win.on('scroll',function(){var scroll=win.scrollTop(),last=offset+nav.outerHeight()-ul.outerHeight()-90;if(scroll>=last){nav.addClass("bottom").removeClass("top fixed");}else if(scroll>offset&&scroll<last){nav.addClass("fixed").removeClass("top bottom");}else if(last<=0){nav.addClass("top").removeClass("bottom fixed");}else if(scroll<=offset){nav.removeClass("top bottom fixed");}else{nav.addClass("top").removeClass("bottom fixed");}
$("li",nav).each(function(){var me=$(this),href=me.attr('scroll-href');if(href=='0'){var y=0;me.addClass("cur");}else{if($(href).length){var y=$(href).offset().top-120;}}
if(scroll>=y){$("li",nav).removeClass("cur");me.addClass("cur");}else{me.removeClass("cur");}});});}